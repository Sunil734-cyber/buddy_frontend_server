<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="3D Multiplayer Dance Party with Buddy - Chat, Dance, and Have Fun!">
    <meta name="theme-color" content="#4a86e8">
    <link rel="icon" type="image/png" href="Buddy.png">
    <title>Buddy.io</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- UI Elements -->
  <div id="ui-container">
    <!-- Add mode toggle bar -->
    <div id="mode-toggle-container">
      <div class="mode-indicator world" id="mode-indicator"></div>
      <div class="mode-label">Mode:</div>
      <button id="world-mode-btn" class="mode-btn active">World Mode</button>
      <button id="single-mode-btn" class="mode-btn">Single Mode</button>
    </div>
      <div id="info-panel">i</div>
<div id="info-content">
  <button id="close-info">&times;</button>
  <h3>Buddy.io Info</h3>
  <p><strong>Single Mode:</strong> In a single-player mode only you can interact with your avatar in a private space.</p>
  <p><strong>World Mode:</strong> In this mode, any user who has opted the world mode can join and interact with you and chat . It's a shared space designed for multiplayer fun.</p>
  <p><strong>Note:</strong> The user interface supports up to 3 avatars in world mode and right now is designed for big screens interfaces. Anyone can joinâ€”have fun!</p>
</div>
    
<div id="login-panel" class="panel">
  <h2>WeLcome to Buddyyy !!</h2>
  <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px;">
    <label for="username-input" style="white-space: nowrap;">Buddy Name :</label>
    <input type="text" id="username-input" placeholder="ABC...." style="width: 180px;">
  </div>
  <div>
    <button id="login-button">Talk to buddy</button>
  </div>
</div>
    <div id="social-panel" class="panel">
      <div class="panel-header">Online Players</div>
      <div class="panel-content" id="social-content">
        <div id="user-list"></div>
      </div>
    </div>
    
    <div id="chat-panel" class="panel">
      <div class="panel-header">Chat with online players</div>
      <div class="panel-content" id="chat-content">
        <div id="chat-messages"></div>
        <div style="display: flex; align-items: center;">
          <input type="text" id="chat-input" placeholder="Type a message...">
          <button id="send-button">&#x27A4;</button>
        </div>
      </div>
    </div>
    
    <div id="controls" class="panel">
 

    </div>
    
    <!-- Add this below the other panels -->
    <div id="ai-chat-panel" class="panel" style="position: absolute; bottom: 60px; left: 10px; width: 300px; display: none;">
      <h3>Talk with Buddy</h3>
      <div id="ai-chat-messages" style="height: 150px; overflow-y: auto; margin-bottom: 10px;"></div>
      <div style="display: flex;">
        <input type="text" id="ai-chat-input" placeholder="Chat with Buddy..." style="flex-grow: 1;">
        <button id="ai-send-button" style="margin-left: 5px;">&#x27A4;</button>
      </div>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loading">
    <div>Loading 3D viewer...</div>
    <div id="status">Initializing</div>
    <progress id="progress" value="0" max="100"></progress>
  </div>

  <!-- Three.js will render here -->
  
  <!-- Libraries -->
  <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
  
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/examples/jsm/curves/NURBSCurve.js": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/curves/NURBSCurve.js",
        "fflate": "https://cdn.jsdelivr.net/npm/fflate@0.8.0/esm/browser.js"
      }
    }
  </script>
  
  <script type="module">
    // Import Three.js and make it global
    import * as THREE from 'three';
    window.THREE = THREE;
    
    // Import modular FBXLoader
    import { FBXLoader } from './FBXLoader/index.js';
    
    // Make FBXLoader available globally for the rest of the script
    window.FBXLoader = FBXLoader;
    
    // Signal that modules are loaded
    window.modulesLoaded = true;
    window.dispatchEvent(new Event('modulesloaded'));
  </script>
  
  <script src="scripts.js"></script>
</body>
</html> 
